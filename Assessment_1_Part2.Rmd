---
title: "Asessment 1 (Part2)"
author: "Kris Chavez (s4591950)"
date: '2022-05-010'
output: 
  html_document:
      number_sections: true           
      toc: true                       #TOC = Table of COntents
      toc_depth: 2
      theme: readable                  #Added a theme to make the document more appealing
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# install.packages("tidyverse")
# install.packages("rmarkdown")
# install.packages("dplyr")
# install.packages("skimr")
# install.packages("ggplot2")
library(tidyverse)
library(rmarkdown)
library(dplyr)
library(skimr)
library(ggplot2)
```


### Loading the dataset
As shown below, we have loaded the *data* in a **new** variable called 'fastfood'
```{r load the required CSV file}
# Set working the working directory to the data set provided by the lecturer
fastfood <- read.csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2018/2018-09-04/fastfood_calories.csv")
```


### Saving a copy of the dataset
``` {r saving a  copy of the CSV file}
# Saving my data as a CSV file
write_csv(fastfood, "fastfood.csv")
fastfood_data<-read_csv("fastfood.csv")
```


### Display the oobservations that has more than 1000 calories
``` {r}
fastfood %>%                  # add a pipe
  filter(calories > 1000)     # greater than filter
```


### Arrange observations with more than 40 in total_fat and more than 80 in total_carb in the descending order and save them to a new variable (dataset) called 'dont_eat_this'
``` {r}
# create a data frame called 'dont_eat_this'
dont_eat_this <- fastfood

# use the functions ARRANGE, GROUP_BY, DESC and .BY_GROUP
# goal is to find the items with more than 40 total_cat and 80 total_carb
dont_eat_this <- arrange(group_by(fastfood, item), # item is used as the key column to group
                         desc(total_fat > 40), 
                         desc(total_carb > 80),
                         .by_group = TRUE)
dont_eat_this
  
```


### Using the initial dataset variable, use `case_when()` to create a new variable `heavy_food` which is equal to "heavy" when total calories (`calories`) are greater than 500, "low" when total calories are less than 250 and "average" for all other cases. Count the number of observations in each created category.
``` {r}
# create a new variable
# when total calories is greater than 500
# low calories = less than 250
# average calories = all other cases
dont_eat_this <- mutate(fastfood,
    heavy_food = case_when(
    calories > 500 ~ "heavy",
    calories < 250 ~ "low",
    TRUE ~ "other"
    )
  )
dont_eat_this

# now that we have the newly created variable called 'heavy_food'
# use the count function to count the observations
dont_eat_this %>%
  count(heavy_food) %>%
  mutate(heavy_food_count = n)

```


### Display the types of variables in the dataset using 'skimr' package
``` {r}
# Display the summary of the dataset using skim
skim(fastfood)

# Use the script below to display a summary of the variables + averages of the data set
skim(fastfood) %>%
  dplyr::select(skim_type, skim_variable, numeric.mean)
```


### Present the count observation from each restaurant in a descending order

Show the number of distinct items on a menu in the data set
``` {r}
# Count each item from a restaurant > in descending order
fastfood %>%
  count(restaurant,item) %>%
  group_by(item) %>%
  arrange(desc(item))

# More cleaner way to view the n/ items based on the distinct RESTAURANT
fastfood %>%
  group_by(restaurant) %>%
  summarise(fastfood = n_distinct(item)) %>%
  arrange(desc(fastfood))
```


### Using groupings (group_by()), summarise and display the average number of calories for each restaurant.
``` {r}
# vars = variable
# grouping RESTAURANT by CALORIES average
fastfood %>%
  group_by(restaurant) %>%
  summarise_at(vars(calories), list(calories_average = mean))
```







### Add variables to the dataset, which:
-  calculates the average calories per type of restaurant and call it `average_calories` 
-  calculates the maximum total_fat per type of restaurant and call it `max_fat` 
-  calculates the minimum cholesterol per type of restaurant and call it `min_cholesterol` 
``` {r}
# Find a way to mutate these functions


# average_calories
fastfood %>%
  group_by(item) %>%
  summarise(average_calories = mean(calories))

# max_fat
fastfood %>%
  rowwise()%>%
  mutate(
    max_fat = max(c(total_fat))
  )

# min cholesterol
fastfood %>%
  rowwise()%>%
  mutate(
    min_cholesterol = min(c(restaurant,cholesterol))
  )
```







### Display the data vis of total fat per each type of restaurant. Write a narration (2-3 sentences) why you believe this type of data viz presents such information best.
Using one of the functions from the 'TidyVerse' package,  __'GGPLOT'__ was used to display the total_fat(y-axis) against the different type of restaurants(x-axis) in a visual graph.  As shown below, we can see that the franchise 'McDonalds' and 'Burger King' were the top two restaurants with the most amount of total_fat content in their items (food).  Whilst the franchise 'Chick Fil-A' having the least total_fat content per item (disregarding the outliers).   
``` {r}
ggplot(data = fastfood) +
  geom_point(mapping = aes(x = restaurant, y = total_fat))

```

### Add a variable to the dataset, which calculates the sum of cholesterol and sodium and call it `cholesterol_sodium`.

Remove the variable `salad`
``` {r}

```






### Use observations for Mcdonalds to plot sugar variable against protein with `geom_point()` 
``` {r}
ggplot(fastfood, aes(restaurant, sugar)) +
  geom_point(size = 3) +
  geom_line(colour = "red")

```


### Use observations for Mcdonalds to plot sugar variable against protein with `geom_point()` 
``` {r}
fastfood %>%
  filter(restaurant == "Mcdonalds") %>%
  ggplot(aes(protein, sugar)) + 
  geom_point(colour = "red") +
  geom_line()
```

